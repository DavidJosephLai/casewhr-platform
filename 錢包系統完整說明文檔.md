# ğŸ¦ casewhr.com éŒ¢åŒ…ç³»çµ±å®Œæ•´èªªæ˜æ–‡æª”

> **å¹³å°ç‰ˆæœ¬**: v2.0.5  
> **æœ€å¾Œæ›´æ–°**: 2025å¹´12æœˆ31æ—¥  
> **æ–‡æª”èªè¨€**: ç¹é«”ä¸­æ–‡  
> **é©ç”¨è§’è‰²**: å¹³å°ç®¡ç†å“¡ã€é–‹ç™¼äººå“¡ã€æ¡ˆä¸»ã€æ¥æ¡ˆè€…

---

## ğŸ“‹ ç›®éŒ„

1. [ç³»çµ±æ¦‚è¿°](#1-ç³»çµ±æ¦‚è¿°)
2. [éŒ¢åŒ…æ¶æ§‹](#2-éŒ¢åŒ…æ¶æ§‹)
3. [æ ¸å¿ƒåŠŸèƒ½](#3-æ ¸å¿ƒåŠŸèƒ½)
4. [å……å€¼ç³»çµ±](#4-å……å€¼ç³»çµ±)
5. [ææ¬¾ç³»çµ±](#5-ææ¬¾ç³»çµ±)
6. [æ‰˜ç®¡æ©Ÿåˆ¶](#6-æ‰˜ç®¡æ©Ÿåˆ¶)
7. [äº¤æ˜“æµç¨‹](#7-äº¤æ˜“æµç¨‹)
8. [è²¨å¹£æ”¯æ´](#8-è²¨å¹£æ”¯æ´)
9. [æ‰‹çºŒè²»è¦å‰‡](#9-æ‰‹çºŒè²»è¦å‰‡)
10. [å®‰å…¨æ©Ÿåˆ¶](#10-å®‰å…¨æ©Ÿåˆ¶)
11. [API ç«¯é»](#11-api-ç«¯é»)
12. [å¸¸è¦‹å•é¡Œ](#12-å¸¸è¦‹å•é¡Œ)

---

## 1. ç³»çµ±æ¦‚è¿°

### 1.1 éŒ¢åŒ…ç³»çµ±ç°¡ä»‹

casewhr.com éŒ¢åŒ…ç³»çµ±æ˜¯ä¸€å€‹**å®‰å…¨ã€å¤šå¹£åˆ¥ã€å…¨è‡ªå‹•åŒ–**çš„æ•¸ä½éŒ¢åŒ…å¹³å°ï¼Œç‚ºå…¨çƒæ¥æ¡ˆå¹³å°æä¾›å®Œæ•´çš„è³‡é‡‘ç®¡ç†è§£æ±ºæ–¹æ¡ˆã€‚

**æ ¸å¿ƒç‰¹æ€§**ï¼š
- âœ… **å¤šå¹£åˆ¥æ”¯æ´**: USDã€TWDã€CNY ä¸‰ç¨®è²¨å¹£
- âœ… **å¯¦æ™‚åŒ¯ç‡è½‰æ›**: æ™ºèƒ½åŒ¯ç‡è¨ˆç®—èˆ‡é¡¯ç¤º
- âœ… **é›™é‡æ”¯ä»˜æ•´åˆ**: ECPay ç¶ ç•Œé‡‘æµ + PayPal
- âœ… **æ‰˜ç®¡ä¿è­·æ©Ÿåˆ¶**: ä¿éšœé›™æ–¹äº¤æ˜“å®‰å…¨
- âœ… **è‡ªå‹•åŒ–è™•ç†**: å……å€¼ã€ææ¬¾ã€æ’¥æ¬¾å…¨è‡ªå‹•
- âœ… **å³æ™‚é¤˜é¡æ›´æ–°**: æ‰€æœ‰æ“ä½œå³æ™‚åæ˜ 

### 1.2 é©ç”¨ç”¨æˆ¶

| ç”¨æˆ¶é¡å‹ | ä¸»è¦åŠŸèƒ½ | æ”¯æ´å¹£åˆ¥ |
|---------|---------|---------|
| **æ¡ˆä¸» (Client)** | å……å€¼ã€è¨—ç®¡ã€æ’¥æ¬¾ | USD, TWD, CNY |
| **æ¥æ¡ˆè€… (Freelancer)** | æ”¶æ¬¾ã€ææ¬¾ | USD, TWD, CNY |
| **ç®¡ç†å“¡ (Admin)** | ç›£æ§ã€å¯©æ ¸ã€çµ±è¨ˆ | å…¨éƒ¨ |

---

## 2. éŒ¢åŒ…æ¶æ§‹

### 2.1 è³‡æ–™çµæ§‹

éŒ¢åŒ…ç³»çµ±ä½¿ç”¨ **Key-Value Store** å„²å­˜ï¼Œæ¯å€‹ç”¨æˆ¶æ“æœ‰å”¯ä¸€éŒ¢åŒ…ï¼š

```typescript
interface Wallet {
  user_id: string;                  // ç”¨æˆ¶å”¯ä¸€ ID
  available_balance: number;        // å¯ç”¨é¤˜é¡ (TWD)
  pending_withdrawal: number;       // ææ¬¾è™•ç†ä¸­é‡‘é¡ (TWD)
  total_earned: number;             // ç´¯è¨ˆæ”¶å…¥ (TWD)
  total_spent: number;              // ç´¯è¨ˆæ”¯å‡º (TWD)
  created_at: string;               // å‰µå»ºæ™‚é–“
  updated_at: string;               // æœ€å¾Œæ›´æ–°æ™‚é–“
}
```

**å„²å­˜æ ¼å¼**ï¼š
- **Key**: `wallet_{user_id}`
- **Value**: Wallet ç‰©ä»¶ (JSON)
- **èˆŠæ ¼å¼ç›¸å®¹**: ç³»çµ±è‡ªå‹•é·ç§» `wallet:${user_id}` æ ¼å¼

### 2.2 è²¨å¹£å„²å­˜ç­–ç•¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           éŒ¢åŒ…è²¨å¹£å„²å­˜èˆ‡é¡¯ç¤ºé‚è¼¯                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  è³‡æ–™åº«å„²å­˜ (Storage Currency)                       â”‚
â”‚  â”œâ”€ çµ±ä¸€å„²å­˜ç‚º: TWD (æ–°å°å¹£)                         â”‚
â”‚  â””â”€ æ‰€æœ‰é‡‘é¡ Ã— 1 (åŸºæº–è²¨å¹£)                          â”‚
â”‚                                                     â”‚
â”‚  å‰ç«¯é¡¯ç¤º (Display Currency)                         â”‚
â”‚  â”œâ”€ è‹±æ–‡ç‰ˆ (en): USD (ç¾é‡‘)                         â”‚
â”‚  â”‚   â””â”€ TWD Ã· 30.5 (å‹•æ…‹åŒ¯ç‡)                       â”‚
â”‚  â”œâ”€ ç¹ä¸­ç‰ˆ (zh-TW): TWD (æ–°å°å¹£)                    â”‚
â”‚  â”‚   â””â”€ ç›´æ¥é¡¯ç¤º (ç„¡éœ€è½‰æ›)                          â”‚
â”‚  â””â”€ ç°¡ä¸­ç‰ˆ (zh-CN): CNY (äººæ°‘å¹£)                    â”‚
â”‚      â””â”€ TWD Ã· 4.3 (å‹•æ…‹åŒ¯ç‡)                        â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç‚ºä½•çµ±ä¸€ä½¿ç”¨ TWDï¼Ÿ**
1. **è³‡æ–™ä¸€è‡´æ€§**: é¿å…åŒ¯ç‡æ³¢å‹•é€ æˆè³‡æ–™ä¸ä¸€è‡´
2. **ç°¡åŒ–è¨ˆç®—**: å¾Œç«¯åªéœ€è™•ç†å–®ä¸€è²¨å¹£
3. **å¯©è¨ˆå‹å¥½**: è²¡å‹™å ±è¡¨ä½¿ç”¨çµ±ä¸€åŸºæº–
4. **å‰ç«¯éˆæ´»**: æ ¹æ“šç”¨æˆ¶èªè¨€å‹•æ…‹è½‰æ›é¡¯ç¤º

---

## 3. æ ¸å¿ƒåŠŸèƒ½

### 3.1 åŠŸèƒ½çŸ©é™£

| åŠŸèƒ½ | æ¡ˆä¸» | æ¥æ¡ˆè€… | èªªæ˜ |
|-----|-----|-------|-----|
| **æŸ¥çœ‹é¤˜é¡** | âœ… | âœ… | å³æ™‚é¡¯ç¤ºå¯ç”¨é¤˜é¡ |
| **å……å€¼** | âœ… | âŒ | æ¡ˆä¸»å¯å……å€¼åˆ°éŒ¢åŒ… |
| **ææ¬¾** | âŒ | âœ… | æ¥æ¡ˆè€…å¯ç”³è«‹ææ¬¾ |
| **è¨—ç®¡** | âœ… | âŒ | æ¥å—ææ¡ˆæ™‚è‡ªå‹•è¨—ç®¡ |
| **æ’¥æ¬¾** | âœ… | âŒ | é©—æ”¶å¾Œæ’¥æ¬¾çµ¦æ¥æ¡ˆè€… |
| **äº¤æ˜“è¨˜éŒ„** | âœ… | âœ… | æŸ¥çœ‹æ‰€æœ‰äº¤æ˜“æ­·å² |
| **é€€æ¬¾** | âœ… | âŒ | é …ç›®å–æ¶ˆæ™‚é€€æ¬¾ |

### 3.2 ç‹€æ…‹æµç¨‹åœ–

```
æ¡ˆä¸»å……å€¼æµç¨‹
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é¸æ“‡é‡‘é¡ â”‚ -> â”‚ é¸æ“‡æ”¯ä»˜ â”‚ -> â”‚ æ”¯ä»˜æˆåŠŸ â”‚ -> â”‚ é¤˜é¡å¢åŠ  â”‚
â”‚         â”‚    â”‚ æ–¹å¼     â”‚    â”‚ å›èª¿è™•ç† â”‚    â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                                â”‚
                    â”œâ”€ ECPay (TWD)                  â”‚
                    â””â”€ PayPal (USD)                 â”‚
                                                     â”‚
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚ å‰µå»ºäº¤æ˜“è¨˜éŒ„ (deposit)   â”‚
                                        â”‚ ç™¼é€å……å€¼æˆåŠŸé€šçŸ¥         â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ¥æ¡ˆè€…æ”¶æ¬¾ & ææ¬¾æµç¨‹
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®Œæˆå·¥ä½œ â”‚ -> â”‚ æ¡ˆä¸»é©—æ”¶ â”‚ -> â”‚ æ’¥æ¬¾é‡‹æ”¾ â”‚ -> â”‚ é¤˜é¡å¢åŠ  â”‚
â”‚         â”‚    â”‚          â”‚    â”‚          â”‚    â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚ å¯ç”³è«‹ææ¬¾              â”‚
                                        â”‚ - éŠ€è¡Œè½‰å¸³ (2% æ‰‹çºŒè²») â”‚
                                        â”‚ - PayPal (2% æ‰‹çºŒè²»)   â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚ ç®¡ç†å“¡å¯©æ ¸              â”‚
                                        â”‚ - 3-5 å·¥ä½œæ—¥            â”‚
                                        â”‚ - æ‰‹å‹•æ’¥æ¬¾              â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. å……å€¼ç³»çµ±

### 4.1 æ”¯æ´çš„æ”¯ä»˜æ–¹å¼

#### ğŸŸ¢ ECPay ç¶ ç•Œé‡‘æµ (æ¨è–¦ç”¨æ–¼å°ç£ç”¨æˆ¶)

**ç‰¹è‰²**ï¼š
- âœ… æ”¯æ´å°ç£æ‰€æœ‰ä¸»æµæ”¯ä»˜æ–¹å¼
- âœ… å³æ™‚åˆ°è³¬ (1-5åˆ†é˜)
- âœ… æ”¯æ´æ–°å°å¹£ (TWD)
- âœ… ç„¡æ‰‹çºŒè²»

**æ”¯æ´æ–¹å¼**ï¼š
1. **ä¿¡ç”¨å¡**: VISAã€MasterCardã€JCB
2. **ATM è½‰å¸³**: è™›æ“¬å¸³è™Ÿ
3. **è¶…å•†ä»£ç¢¼**: 7-11ã€å…¨å®¶ã€èŠçˆ¾å¯Œã€OK
4. **WebATM**: ç¶²è·¯éŠ€è¡Œè½‰å¸³

**æœ€ä½å……å€¼é‡‘é¡**: **NT$300**

#### ğŸ”µ PayPal (æ¨è–¦ç”¨æ–¼åœ‹éš›ç”¨æˆ¶)

**ç‰¹è‰²**ï¼š
- âœ… å…¨çƒé€šç”¨
- âœ… æ”¯æ´ç¾é‡‘ (USD)
- âœ… å³æ™‚åˆ°è³¬
- âœ… ä¿¡ç”¨å¡/PayPal å¸³æˆ¶

**æ”¯æ´æ–¹å¼**ï¼š
1. **PayPal é¤˜é¡**
2. **é€£çµä¿¡ç”¨å¡/é‡‘èå¡**
3. **éŠ€è¡Œå¸³æˆ¶**

**æœ€ä½å……å€¼é‡‘é¡**: **$10 USD** (ç´„ NT$300)

### 4.2 å……å€¼æµç¨‹

#### å‰ç«¯å……å€¼æ“ä½œ (`Wallet.tsx`)

```typescript
const handleDeposit = async () => {
  // 1. é©—è­‰ç™»å…¥ç‹€æ…‹
  if (!user?.id || !accessToken) {
    toast.error('ğŸ” è«‹å…ˆç™»å…¥ä»¥å……å€¼');
    return;
  }
  
  // 2. é©—è­‰é‡‘é¡
  const amount = parseFloat(depositAmount);
  if (!amount || amount <= 0) {
    toast.error('è«‹è¼¸å…¥æœ‰æ•ˆé‡‘é¡');
    return;
  }
  
  // 3. æª¢æŸ¥æœ€ä½å……å€¼é‡‘é¡ (300 TWD)
  const twdAmount = displayCurrency === 'TWD'
    ? amount
    : convertCurrency(amount, displayCurrency, 'TWD');
  
  if (twdAmount < 300) {
    toast.error('æœ€å°å……å€¼é‡‘é¡ç‚º NT$300');
    return;
  }
  
  // 4. è²¨å¹£è½‰æ› (PayPal åªæ”¯æ´ USD)
  const usdAmount = displayCurrency === 'USD'
    ? amount
    : convertCurrency(amount, displayCurrency, 'USD');
  
  // 5. èª¿ç”¨ PayPal å……å€¼ API
  const response = await fetch(
    `https://${projectId}.supabase.co/functions/v1/make-server-215f78a5/paypal/create-order`,
    {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${accessToken}`,
      },
      body: JSON.stringify({
        amount: usdAmount.toFixed(2),
        currency: 'USD',
        description: `Wallet Deposit - ${displayCurrency} ${amount}`,
      }),
    }
  );
  
  // 6. è·³è½‰åˆ° PayPal æ”¯ä»˜é é¢
  const { orderId } = await response.json();
  window.location.href = `https://www.paypal.com/checkoutnow?token=${orderId}`;
};
```

#### å¾Œç«¯å……å€¼è™•ç† (`paypal_service.tsx`)

```typescript
// PayPal å›èª¿è™•ç†
app.get("/make-server-215f78a5/paypal/callback", async (c) => {
  const orderId = c.req.query('token');
  const userId = c.req.query('userId');
  
  // 1. å‘ PayPal ç¢ºèªè¨‚å–®
  const captureResponse = await fetch(
    `https://api-m.paypal.com/v2/checkout/orders/${orderId}/capture`,
    {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Basic ${base64Credentials}`,
      },
    }
  );
  
  const captureData = await captureResponse.json();
  
  if (captureData.status === 'COMPLETED') {
    // 2. ç²å–ç”¨æˆ¶éŒ¢åŒ…
    const walletKey = `wallet_${userId}`;
    let wallet = await kv.get(walletKey);
    
    if (!wallet) {
      wallet = {
        user_id: userId,
        available_balance: 0,
        pending_withdrawal: 0,
        total_earned: 0,
        total_spent: 0,
        created_at: new Date().toISOString(),
        updated_at: new Date().toISOString(),
      };
    }
    
    // 3. å°‡ USD è½‰æ›ç‚º TWD å„²å­˜
    const usdAmount = parseFloat(captureData.purchase_units[0].amount.value);
    const twdAmount = usdAmount * 30.5; // ä½¿ç”¨å¯¦æ™‚åŒ¯ç‡
    
    // 4. æ›´æ–°éŒ¢åŒ…é¤˜é¡
    wallet.available_balance += twdAmount;
    wallet.updated_at = new Date().toISOString();
    await kv.set(walletKey, wallet);
    
    // 5. å‰µå»ºäº¤æ˜“è¨˜éŒ„
    const transaction = {
      id: `txn_${Date.now()}_${userId}`,
      user_id: userId,
      type: 'deposit',
      amount: twdAmount,
      status: 'completed',
      description: `PayPal Deposit - $${usdAmount} USD`,
      created_at: new Date().toISOString(),
      payment_method: 'paypal',
      reference_id: orderId,
    };
    await kv.set(`transaction:${transaction.id}`, transaction);
    
    // 6. ç™¼é€å……å€¼æˆåŠŸé€šçŸ¥
    await emailService.sendDepositConfirmation(userId, twdAmount);
    
    // 7. é‡å®šå‘å›éŒ¢åŒ…é é¢
    return c.redirect('https://casewhr.com/dashboard?tab=wallet&success=true');
  }
});
```

### 4.3 å……å€¼æˆåŠŸé€šçŸ¥

å……å€¼æˆåŠŸå¾Œï¼Œç³»çµ±æœƒè‡ªå‹•ç™¼é€é›™èªéƒµä»¶é€šçŸ¥ï¼š

**éƒµä»¶å…§å®¹**ï¼š
- âœ… å……å€¼é‡‘é¡ (åŸå¹£åˆ¥ + TWD)
- âœ… ç•¶å‰é¤˜é¡
- âœ… äº¤æ˜“ç·¨è™Ÿ
- âœ… äº¤æ˜“æ™‚é–“
- âœ… æ”¯ä»˜æ–¹å¼

---

## 5. ææ¬¾ç³»çµ±

### 5.1 ææ¬¾è³‡æ ¼èˆ‡é™åˆ¶

| é …ç›® | è¦æ±‚ |
|-----|-----|
| **ç”¨æˆ¶é¡å‹** | åƒ…é™æ¥æ¡ˆè€… (Freelancer) |
| **æœ€ä½ææ¬¾é‡‘é¡** | $50 USD (ç´„ NT$1,500) |
| **æ‰‹çºŒè²»** | 2% |
| **è™•ç†æ™‚é–“** | 3-5 å·¥ä½œæ—¥ |
| **ææ¬¾æ–¹å¼** | éŠ€è¡Œè½‰å¸³ / PayPal |

### 5.2 ææ¬¾æµç¨‹

#### Step 1: æ·»åŠ ææ¬¾æ–¹å¼

ç”¨æˆ¶éœ€å…ˆåœ¨ã€ŒéŠ€è¡Œå¸³æˆ¶ç®¡ç†ã€ä¸­æ·»åŠ ææ¬¾æ–¹å¼ï¼š

**éŠ€è¡Œå¸³æˆ¶** (`BankAccountManager.tsx`):
```typescript
interface BankAccount {
  id: string;
  user_id: string;
  bank_name: string;              // éŠ€è¡Œåç¨±
  bank_code: string;              // éŠ€è¡Œä»£ç¢¼ (å°ç£: 3ç¢¼, åœ‹éš›: SWIFT)
  account_number: string;         // å¸³æˆ¶è™Ÿç¢¼
  account_holder_name: string;    // æˆ¶å
  branch_name?: string;           // åˆ†è¡Œåç¨±
  is_default: boolean;            // æ˜¯å¦ç‚ºé è¨­å¸³æˆ¶
  country: string;                // åœ‹å®¶ (TW, US, CN, etc.)
  currency: Currency;             // å¹£åˆ¥ (TWD, USD, CNY)
  created_at: string;
}
```

**PayPal å¸³æˆ¶**:
```typescript
interface PayPalAccount {
  id: string;
  user_id: string;
  paypal_email: string;           // PayPal é›»å­éƒµä»¶
  is_verified: boolean;           // æ˜¯å¦å·²é©—è­‰
  is_default: boolean;
  created_at: string;
}
```

#### Step 2: ç”³è«‹ææ¬¾

```typescript
// å‰ç«¯ææ¬¾ç”³è«‹ (WithdrawalRequest.tsx)
const handleSubmit = async () => {
  const withdrawalAmount = parseFloat(amount);
  
  // 1. é©—è­‰é‡‘é¡
  if (withdrawalAmount < MINIMUM_WITHDRAWAL) {
    toast.error(`æœ€ä½ææ¬¾é‡‘é¡ç‚º $${MINIMUM_WITHDRAWAL}`);
    return;
  }
  
  // 2. æª¢æŸ¥é¤˜é¡
  if (withdrawalAmount > wallet.available_balance) {
    toast.error('é¤˜é¡ä¸è¶³');
    return;
  }
  
  // 3. è¨ˆç®—æ‰‹çºŒè²»
  const fee = withdrawalAmount * WITHDRAWAL_FEE_RATE; // 2%
  const netAmount = withdrawalAmount - fee;
  
  // 4. æäº¤ææ¬¾ç”³è«‹
  const response = await fetch(
    `https://${projectId}.supabase.co/functions/v1/make-server-215f78a5/withdrawals`,
    {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${accessToken}`,
      },
      body: JSON.stringify({
        amount: withdrawalAmount,
        method_id: selectedMethod,
        currency: displayCurrency,
      }),
    }
  );
  
  if (response.ok) {
    toast.success('ææ¬¾ç”³è«‹å·²æäº¤ï¼Œå°‡æ–¼ 3-5 å·¥ä½œæ—¥å…§è™•ç†');
    loadWalletData(); // åˆ·æ–°éŒ¢åŒ…æ•¸æ“š
  }
};
```

#### Step 3: å¾Œç«¯ææ¬¾è™•ç†

```typescript
// å¾Œç«¯ææ¬¾ API (index.tsx)
app.post("/make-server-215f78a5/withdrawals", async (c) => {
  const { user } = await getUserFromToken(accessToken);
  const { amount, method_id, currency } = await c.req.json();
  
  // 1. ç²å–ç”¨æˆ¶éŒ¢åŒ…
  const wallet = await kv.get(`wallet_${user.id}`);
  
  // 2. é©—è­‰é¤˜é¡
  const twdAmount = currency === 'TWD' 
    ? amount 
    : convertCurrency(amount, currency, 'TWD');
  
  if (wallet.available_balance < twdAmount) {
    return c.json({ error: 'Insufficient balance' }, 400);
  }
  
  // 3. è¨ˆç®—æ‰‹çºŒè²»
  const fee = twdAmount * 0.02;
  const netAmount = twdAmount - fee;
  
  // 4. æ›´æ–°éŒ¢åŒ…ç‹€æ…‹
  wallet.available_balance -= twdAmount;
  wallet.pending_withdrawal += twdAmount;
  wallet.updated_at = new Date().toISOString();
  await kv.set(`wallet_${user.id}`, wallet);
  
  // 5. å‰µå»ºææ¬¾è¨˜éŒ„
  const withdrawal = {
    id: `withdrawal_${Date.now()}_${user.id}`,
    user_id: user.id,
    amount: twdAmount,
    fee: fee,
    net_amount: netAmount,
    method_id: method_id,
    status: 'pending',
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  };
  await kv.set(`withdrawal:${withdrawal.id}`, withdrawal);
  
  // 6. é€šçŸ¥ç®¡ç†å“¡å¯©æ ¸
  await emailService.notifyAdminNewWithdrawal(withdrawal);
  
  // 7. é€šçŸ¥ç”¨æˆ¶ç”³è«‹å·²æäº¤
  await emailService.sendWithdrawalRequestConfirmation(user.id, withdrawal);
  
  return c.json({ 
    success: true, 
    withdrawal,
    message: 'Withdrawal request submitted successfully'
  });
});
```

#### Step 4: ç®¡ç†å“¡å¯©æ ¸

ç®¡ç†å“¡åœ¨ã€Œç®¡ç†å¾Œå° â†’ ææ¬¾ç®¡ç†ã€ä¸­å¯©æ ¸ï¼š

```typescript
// ç®¡ç†å“¡æ‰¹å‡†ææ¬¾ (admin/AdminWithdrawals.tsx)
const approveWithdrawal = async (withdrawalId: string) => {
  const response = await fetch(
    `https://${projectId}.supabase.co/functions/v1/make-server-215f78a5/admin/withdrawals/${withdrawalId}/approve`,
    {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${accessToken}`,
      },
    }
  );
  
  if (response.ok) {
    toast.success('ææ¬¾å·²æ‰¹å‡†ï¼Œè³‡é‡‘å°‡æ–¼ 1-3 å·¥ä½œæ—¥åˆ°å¸³');
  }
};
```

**å¾Œç«¯å¯©æ ¸è™•ç†**ï¼š
```typescript
app.post("/make-server-215f78a5/admin/withdrawals/:id/approve", async (c) => {
  // 1. é©—è­‰ç®¡ç†å“¡æ¬Šé™
  const { user } = await getUserFromToken(accessToken);
  if (!user.is_admin) {
    return c.json({ error: 'Forbidden' }, 403);
  }
  
  // 2. ç²å–ææ¬¾è¨˜éŒ„
  const withdrawalId = c.req.param('id');
  const withdrawal = await kv.get(`withdrawal:${withdrawalId}`);
  
  // 3. æ›´æ–°ææ¬¾ç‹€æ…‹
  withdrawal.status = 'approved';
  withdrawal.approved_by = user.id;
  withdrawal.approved_at = new Date().toISOString();
  await kv.set(`withdrawal:${withdrawalId}`, withdrawal);
  
  // 4. æ›´æ–°ç”¨æˆ¶éŒ¢åŒ…
  const wallet = await kv.get(`wallet_${withdrawal.user_id}`);
  wallet.pending_withdrawal -= withdrawal.amount;
  await kv.set(`wallet_${withdrawal.user_id}`, wallet);
  
  // 5. åŸ·è¡Œå¯¦éš›è½‰å¸³ (æ•´åˆéŠ€è¡Œ API æˆ– PayPal API)
  if (withdrawal.method_type === 'bank') {
    await executeBankTransfer(withdrawal);
  } else if (withdrawal.method_type === 'paypal') {
    await executePayPalPayout(withdrawal);
  }
  
  // 6. é€šçŸ¥ç”¨æˆ¶ææ¬¾å·²å®Œæˆ
  await emailService.sendWithdrawalCompletedNotification(
    withdrawal.user_id, 
    withdrawal
  );
  
  return c.json({ success: true });
});
```

### 5.3 ææ¬¾ç‹€æ…‹

| ç‹€æ…‹ | èªªæ˜ | ç”¨æˆ¶å¯è¦‹ |
|-----|-----|---------|
| `pending` | ç­‰å¾…å¯©æ ¸ | âœ… |
| `approved` | å·²æ‰¹å‡†ï¼Œè™•ç†ä¸­ | âœ… |
| `completed` | å·²å®Œæˆ | âœ… |
| `rejected` | å·²æ‹’çµ• | âœ… |
| `cancelled` | ç”¨æˆ¶å–æ¶ˆ | âœ… |

---

## 6. æ‰˜ç®¡æ©Ÿåˆ¶

### 6.1 æ‰˜ç®¡æµç¨‹

æ‰˜ç®¡ (Escrow) æ˜¯ä¿éšœé›™æ–¹äº¤æ˜“å®‰å…¨çš„æ ¸å¿ƒæ©Ÿåˆ¶ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             æ¡ˆä¸»æ¥å—ææ¡ˆ â†’ è‡ªå‹•å‰µå»ºæ‰˜ç®¡              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 1. å¾æ¡ˆä¸»éŒ¢åŒ…æ‰£é™¤é …ç›®é‡‘é¡      â”‚
        â”‚    - available_balance æ¸›å°‘   â”‚
        â”‚    - pending_withdrawal å¢åŠ   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 2. å‰µå»ºæ‰˜ç®¡è¨˜éŒ„                â”‚
        â”‚    - ç‹€æ…‹: pending            â”‚
        â”‚    - é‡‘é¡: é …ç›®é ç®—           â”‚
        â”‚    - é–å®šåˆ°é …ç›®å®Œæˆ           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 3. æ¥æ¡ˆè€…é–‹å§‹å·¥ä½œ              â”‚
        â”‚    - éŒ¢åŒ…é¤˜é¡ä¸è®Š             â”‚
        â”‚    - ç­‰å¾…æ¡ˆä¸»é©—æ”¶             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 4. æ¡ˆä¸»é©—æ”¶ä¸¦æ’¥æ¬¾              â”‚
        â”‚    - æ‰˜ç®¡é‡‹æ”¾                 â”‚
        â”‚    - æ¥æ¡ˆè€…é¤˜é¡å¢åŠ            â”‚
        â”‚    - æ¡ˆä¸» pending æ¸›å°‘        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 æ‰˜ç®¡æ•¸æ“šçµæ§‹

```typescript
interface Escrow {
  id: string;                       // æ‰˜ç®¡ ID
  project_id: string;               // é …ç›® ID
  proposal_id: string;              // ææ¡ˆ ID
  client_id: string;                // æ¡ˆä¸» ID
  freelancer_id: string;            // æ¥æ¡ˆè€… ID
  amount: number;                   // æ‰˜ç®¡é‡‘é¡ (TWD)
  platform_fee: number;             // å¹³å°æ‰‹çºŒè²» (5-10%)
  freelancer_payout: number;        // æ¥æ¡ˆè€…å¯¦æ”¶é‡‘é¡
  status: EscrowStatus;             // æ‰˜ç®¡ç‹€æ…‹
  created_at: string;
  released_at?: string;             // é‡‹æ”¾æ™‚é–“
}

type EscrowStatus = 
  | 'pending'      // ç­‰å¾…é©—æ”¶
  | 'released'     // å·²é‡‹æ”¾
  | 'refunded'     // å·²é€€æ¬¾
  | 'disputed';    // çˆ­è­°ä¸­
```

### 6.3 æ‰˜ç®¡å‰µå»º (æ¥å—ææ¡ˆæ™‚)

```typescript
// å¾Œç«¯è™•ç† (index.tsx)
app.post("/make-server-215f78a5/proposals/:id/accept", async (c) => {
  const { user } = await getUserFromToken(accessToken);
  const proposalId = c.req.param('id');
  
  // 1. ç²å–ææ¡ˆå’Œé …ç›®ä¿¡æ¯
  const proposal = await kv.get(`proposal:${proposalId}`);
  const project = await kv.get(`project:${proposal.project_id}`);
  
  // 2. é©—è­‰æ¡ˆä¸»èº«ä»½
  if (user.id !== proposal.client_id) {
    return c.json({ error: 'Only project owner can accept proposals' }, 403);
  }
  
  // 3. è¨ˆç®—æ‰˜ç®¡é‡‘é¡
  const escrowAmount = proposal.proposed_budget;
  
  // 4. æª¢æŸ¥æ¡ˆä¸»éŒ¢åŒ…é¤˜é¡
  const clientWallet = await kv.get(`wallet_${user.id}`);
  if (clientWallet.available_balance < escrowAmount) {
    return c.json({ 
      error: 'Insufficient wallet balance. Please deposit funds first.',
      required: escrowAmount,
      current: clientWallet.available_balance,
    }, 400);
  }
  
  // 5. æ‰£é™¤æ¡ˆä¸»é¤˜é¡ï¼Œè½‰å…¥ pending
  clientWallet.available_balance -= escrowAmount;
  clientWallet.pending_withdrawal += escrowAmount;
  clientWallet.total_spent += escrowAmount;
  clientWallet.updated_at = new Date().toISOString();
  await kv.set(`wallet_${user.id}`, clientWallet);
  
  // 6. å‰µå»ºæ‰˜ç®¡è¨˜éŒ„
  const platformFeeRate = 0.05; // 5% å¹³å°æ‰‹çºŒè²»
  const platformFee = escrowAmount * platformFeeRate;
  const freelancerPayout = escrowAmount - platformFee;
  
  const escrow = {
    id: `escrow_${Date.now()}_${proposalId}`,
    project_id: proposal.project_id,
    proposal_id: proposalId,
    client_id: user.id,
    freelancer_id: proposal.freelancer_id,
    amount: escrowAmount,
    platform_fee: platformFee,
    freelancer_payout: freelancerPayout,
    status: 'pending',
    created_at: new Date().toISOString(),
  };
  await kv.set(`escrow:${escrow.id}`, escrow);
  
  // 7. æ›´æ–°ææ¡ˆç‹€æ…‹
  proposal.status = 'accepted';
  proposal.accepted_at = new Date().toISOString();
  await kv.set(`proposal:${proposalId}`, proposal);
  
  // 8. æ›´æ–°é …ç›®ç‹€æ…‹
  project.status = 'in_progress';
  project.assigned_to = proposal.freelancer_id;
  await kv.set(`project:${project.id}`, project);
  
  // 9. å‰µå»ºäº¤æ˜“è¨˜éŒ„
  const transaction = {
    id: `txn_${Date.now()}_${user.id}`,
    user_id: user.id,
    type: 'escrow',
    amount: -escrowAmount,
    status: 'completed',
    description: `Escrow for project: ${project.title}`,
    project_id: project.id,
    created_at: new Date().toISOString(),
  };
  await kv.set(`transaction:${transaction.id}`, transaction);
  
  // 10. ç™¼é€é€šçŸ¥
  await emailService.sendProposalAcceptedNotification(
    proposal.freelancer_id,
    project,
    proposal
  );
  await emailService.sendEscrowCreatedNotification(
    user.id,
    escrow
  );
  
  return c.json({ 
    success: true, 
    escrow,
    message: 'Proposal accepted and escrow created'
  });
});
```

### 6.4 æ‰˜ç®¡é‡‹æ”¾ (æ’¥æ¬¾çµ¦æ¥æ¡ˆè€…)

```typescript
// æ¡ˆä¸»æ’¥æ¬¾ API (index.tsx)
app.post("/make-server-215f78a5/escrow/:id/release", async (c) => {
  const { user } = await getUserFromToken(accessToken);
  const escrowId = c.req.param('id');
  
  // 1. ç²å–æ‰˜ç®¡è¨˜éŒ„
  const escrow = await kv.get(`escrow:${escrowId}`);
  
  // 2. é©—è­‰æ¡ˆä¸»èº«ä»½
  if (user.id !== escrow.client_id) {
    return c.json({ error: 'Only client can release escrow' }, 403);
  }
  
  // 3. é©—è­‰æ‰˜ç®¡ç‹€æ…‹
  if (escrow.status !== 'pending') {
    return c.json({ error: 'Escrow already processed' }, 400);
  }
  
  // 4. æ›´æ–°æ¡ˆä¸»éŒ¢åŒ… (æ¸›å°‘ pending)
  const clientWallet = await kv.get(`wallet_${escrow.client_id}`);
  clientWallet.pending_withdrawal -= escrow.amount;
  clientWallet.updated_at = new Date().toISOString();
  await kv.set(`wallet_${escrow.client_id}`, clientWallet);
  
  // 5. æ›´æ–°æ¥æ¡ˆè€…éŒ¢åŒ… (å¢åŠ  available_balance)
  let freelancerWallet = await kv.get(`wallet_${escrow.freelancer_id}`);
  if (!freelancerWallet) {
    freelancerWallet = {
      user_id: escrow.freelancer_id,
      available_balance: 0,
      pending_withdrawal: 0,
      total_earned: 0,
      total_spent: 0,
      created_at: new Date().toISOString(),
      updated_at: new Date().toISOString(),
    };
  }
  
  freelancerWallet.available_balance += escrow.freelancer_payout;
  freelancerWallet.total_earned += escrow.freelancer_payout;
  freelancerWallet.updated_at = new Date().toISOString();
  await kv.set(`wallet_${escrow.freelancer_id}`, freelancerWallet);
  
  // 6. æ›´æ–°æ‰˜ç®¡ç‹€æ…‹
  escrow.status = 'released';
  escrow.released_at = new Date().toISOString();
  await kv.set(`escrow:${escrow.id}`, escrow);
  
  // 7. æ›´æ–°é …ç›®ç‹€æ…‹
  const project = await kv.get(`project:${escrow.project_id}`);
  project.status = 'completed';
  project.completed_at = new Date().toISOString();
  await kv.set(`project:${escrow.project_id}`, project);
  
  // 8. å‰µå»ºäº¤æ˜“è¨˜éŒ„
  const freelancerTransaction = {
    id: `txn_${Date.now()}_${escrow.freelancer_id}`,
    user_id: escrow.freelancer_id,
    type: 'release',
    amount: escrow.freelancer_payout,
    status: 'completed',
    description: `Payment for project: ${project.title}`,
    project_id: project.id,
    created_at: new Date().toISOString(),
  };
  await kv.set(`transaction:${freelancerTransaction.id}`, freelancerTransaction);
  
  // 9. ç™¼é€é€šçŸ¥
  await emailService.sendPaymentReleasedNotification(
    escrow.freelancer_id,
    project,
    escrow
  );
  
  return c.json({ 
    success: true,
    message: 'Payment released to freelancer'
  });
});
```

---

## 7. äº¤æ˜“æµç¨‹

### 7.1 äº¤æ˜“é¡å‹

```typescript
type TransactionType = 
  | 'deposit'      // å……å€¼
  | 'escrow'       // è¨—ç®¡
  | 'release'      // æ’¥æ¬¾
  | 'refund'       // é€€æ¬¾
  | 'withdrawal'   // ææ¬¾
  | 'fee';         // æ‰‹çºŒè²»
```

### 7.2 å®Œæ•´äº¤æ˜“æµç¨‹ç¤ºä¾‹

**æƒ…å¢ƒ**: æ¡ˆä¸»ç™¼å¸ƒ $500 USD é …ç›®ï¼Œæ¥æ¡ˆè€…å®Œæˆå¾Œæ”¶æ¬¾

```
Step 1: æ¡ˆä¸»å……å€¼ $500
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Transaction ID: txn_1735689600000   â”‚
â”‚ User: client@example.com            â”‚
â”‚ Type: deposit                       â”‚
â”‚ Amount: +$500 USD (= NT$15,250)     â”‚
â”‚ Status: completed                   â”‚
â”‚ Description: PayPal Deposit         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Wallet Before: $0                   â”‚
â”‚ Wallet After: $500 (NT$15,250)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 2: æ¥å—ææ¡ˆï¼Œå‰µå»ºè¨—ç®¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Transaction ID: txn_1735689660000   â”‚
â”‚ User: client@example.com            â”‚
â”‚ Type: escrow                        â”‚
â”‚ Amount: -$500 USD (= NT$15,250)     â”‚
â”‚ Status: completed                   â”‚
â”‚ Description: Escrow for "Website"   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Wallet Before: $500                 â”‚
â”‚ Wallet After: $0                    â”‚
â”‚ Pending: $500                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 3: é©—æ”¶ä¸¦æ’¥æ¬¾çµ¦æ¥æ¡ˆè€…
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Transaction ID: txn_1735689720000   â”‚
â”‚ User: freelancer@example.com        â”‚
â”‚ Type: release                       â”‚
â”‚ Amount: +$475 USD (= NT$14,487.5)   â”‚
â”‚ Status: completed                   â”‚
â”‚ Description: Payment for "Website"  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Platform Fee: $25 (5%)              â”‚
â”‚ Freelancer Receives: $475           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Wallet Before: $0                   â”‚
â”‚ Wallet After: $475 (NT$14,487.5)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 4: æ¥æ¡ˆè€…ç”³è«‹ææ¬¾
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Transaction ID: txn_1735689780000   â”‚
â”‚ User: freelancer@example.com        â”‚
â”‚ Type: withdrawal                    â”‚
â”‚ Amount: -$475 USD (= NT$14,487.5)   â”‚
â”‚ Fee: $9.5 (2%)                      â”‚
â”‚ Net: $465.5 USD                     â”‚
â”‚ Status: pending â†’ approved          â”‚
â”‚ Description: Withdrawal to Bank     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Wallet Before: $475                 â”‚
â”‚ Wallet After: $0                    â”‚
â”‚ Bank Receives: $465.5 USD           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.3 äº¤æ˜“è¨˜éŒ„æŸ¥è©¢

```typescript
// å‰ç«¯æŸ¥è©¢äº¤æ˜“è¨˜éŒ„ (TransactionHistory.tsx)
const loadTransactions = async () => {
  const response = await fetch(
    `https://${projectId}.supabase.co/functions/v1/make-server-215f78a5/transactions`,
    {
      headers: {
        'Authorization': `Bearer ${accessToken}`,
      },
    }
  );
  
  const data = await response.json();
  setTransactions(data.transactions);
};
```

**å¾Œç«¯ API**:
```typescript
app.get("/make-server-215f78a5/transactions", async (c) => {
  const { user } = await getUserFromToken(accessToken);
  
  // ç²å–ç”¨æˆ¶æ‰€æœ‰äº¤æ˜“
  const allTransactions = await kv.getByPrefix('transaction:');
  const userTransactions = allTransactions
    .filter(txn => txn.user_id === user.id)
    .sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime());
  
  return c.json({ transactions: userTransactions });
});
```

---

## 8. è²¨å¹£æ”¯æ´

### 8.1 æ”¯æ´è²¨å¹£

| è²¨å¹£ä»£ç¢¼ | è²¨å¹£åç¨± | ç¬¦è™Ÿ | èªè¨€ç‰ˆæœ¬ |
|---------|---------|-----|---------|
| **USD** | ç¾é‡‘ | $ | è‹±æ–‡ç‰ˆ |
| **TWD** | æ–°å°å¹£ | NT$ | ç¹ä¸­ç‰ˆ |
| **CNY** | äººæ°‘å¹£ | Â¥ | ç°¡ä¸­ç‰ˆ |

### 8.2 åŒ¯ç‡æ©Ÿåˆ¶

#### å¯¦æ™‚åŒ¯ç‡ä¾†æº

```typescript
// hooks/useExchangeRate.tsx
export function useExchangeRate() {
  const [rate, setRate] = useState({
    USD_TWD: 30.5,    // 1 USD = 30.5 TWD
    CNY_TWD: 4.3,     // 1 CNY = 4.3 TWD
    USD_CNY: 7.1,     // 1 USD = 7.1 CNY
  });
  
  useEffect(() => {
    // å¾ Edge Function ç²å–å¯¦æ™‚åŒ¯ç‡
    fetch('/api/edge/exchange-rates')
      .then(res => res.json())
      .then(data => setRate(data.rates));
  }, []);
  
  return { rate };
}
```

#### è²¨å¹£è½‰æ›å‡½æ•¸

```typescript
// lib/currency.ts
export function convertCurrency(
  amount: number,
  from: Currency,
  to: Currency
): number {
  if (from === to) return amount;
  
  // æ‰€æœ‰è½‰æ›éƒ½é€é TWD ä½œç‚ºä¸­é–“è²¨å¹£
  const rates = {
    USD_TWD: 30.5,
    CNY_TWD: 4.3,
  };
  
  // From source to TWD
  let twdAmount: number;
  if (from === 'TWD') {
    twdAmount = amount;
  } else if (from === 'USD') {
    twdAmount = amount * rates.USD_TWD;
  } else if (from === 'CNY') {
    twdAmount = amount * rates.CNY_TWD;
  } else {
    throw new Error(`Unsupported currency: ${from}`);
  }
  
  // From TWD to target
  if (to === 'TWD') {
    return twdAmount;
  } else if (to === 'USD') {
    return twdAmount / rates.USD_TWD;
  } else if (to === 'CNY') {
    return twdAmount / rates.CNY_TWD;
  } else {
    throw new Error(`Unsupported currency: ${to}`);
  }
}

export function formatCurrency(
  amount: number,
  currency: Currency
): string {
  const symbols = {
    USD: '$',
    TWD: 'NT$',
    CNY: 'Â¥',
  };
  
  const formatted = amount.toLocaleString('en-US', {
    minimumFractionDigits: 0,
    maximumFractionDigits: 2,
  });
  
  return `${symbols[currency]}${formatted}`;
}
```

### 8.3 åŒ¯ç‡é¡¯ç¤ºçµ„ä»¶

```typescript
// ExchangeRateIndicator.tsx
export function ExchangeRateIndicator() {
  const { language } = useLanguage();
  const { rate } = useExchangeRate();
  
  if (language === 'zh-TW') {
    return null; // ç¹ä¸­ç‰ˆä¸éœ€è¦é¡¯ç¤ºåŒ¯ç‡
  }
  
  const displayRate = language === 'en' 
    ? `1 USD = ${rate.USD_TWD} TWD`
    : `1 CNY = ${rate.CNY_TWD} TWD`;
  
  return (
    <div className="text-sm text-muted-foreground">
      ğŸ“Š {displayRate}
    </div>
  );
}
```

---

## 9. æ‰‹çºŒè²»è¦å‰‡

### 9.1 å¹³å°æ‰‹çºŒè²»

| é …ç›® | è²»ç‡ | æ”¶å–æ™‚æ©Ÿ | èªªæ˜ |
|-----|-----|---------|-----|
| **è¨—ç®¡æ‰‹çºŒè²»** | 5-10% | æ’¥æ¬¾æ™‚ | å¾é …ç›®é‡‘é¡æ‰£é™¤ |
| **ææ¬¾æ‰‹çºŒè²»** | 2% | ææ¬¾æ™‚ | å¾ææ¬¾é‡‘é¡æ‰£é™¤ |
| **å……å€¼æ‰‹çºŒè²»** | 0% | - | å…è²»å……å€¼ |
| **é€€æ¬¾æ‰‹çºŒè²»** | 0% | - | å…¨é¡é€€æ¬¾ |

### 9.2 æ‰‹çºŒè²»è¨ˆç®—ç¯„ä¾‹

#### æƒ…å¢ƒ 1: $1,000 USD é …ç›®

```
é …ç›®ç¸½é¡: $1,000
å¹³å°æ‰‹çºŒè²» (5%): $50
æ¥æ¡ˆè€…å¯¦æ”¶: $950

æ¥æ¡ˆè€…ç”³è«‹ææ¬¾ $950:
ææ¬¾æ‰‹çºŒè²» (2%): $19
å¯¦éš›åˆ°å¸³: $931
```

#### æƒ…å¢ƒ 2: NT$30,000 é …ç›®

```
é …ç›®ç¸½é¡: NT$30,000
å¹³å°æ‰‹çºŒè²» (5%): NT$1,500
æ¥æ¡ˆè€…å¯¦æ”¶: NT$28,500

æ¥æ¡ˆè€…ç”³è«‹ææ¬¾ NT$28,500:
ææ¬¾æ‰‹çºŒè²» (2%): NT$570
å¯¦éš›åˆ°å¸³: NT$27,930
```

### 9.3 ä¼æ¥­æœƒå“¡å„ªæƒ 

| æœƒå“¡ç­‰ç´š | å¹³å°æ‰‹çºŒè²» | ææ¬¾æ‰‹çºŒè²» | å„ªæƒ  |
|---------|-----------|-----------|-----|
| **Free** | 10% | 2% | - |
| **Pro** | 7% | 2% | å¹³å°æ‰‹çºŒè²» 30% æŠ˜æ‰£ |
| **Enterprise** | 5% | 1% | æœ€å„ªæƒ è²»ç‡ |

---

## 10. å®‰å…¨æ©Ÿåˆ¶

### 10.1 è³‡é‡‘å®‰å…¨

1. **å†·ç†±éŒ¢åŒ…åˆ†é›¢**:
   - ç†±éŒ¢åŒ…: è™•ç†æ—¥å¸¸äº¤æ˜“ (20%)
   - å†·éŒ¢åŒ…: å„²å­˜å¤§éƒ¨åˆ†è³‡é‡‘ (80%)

2. **å¤šé‡ç°½å**:
   - å¤§é¡ææ¬¾ (>$10,000) éœ€è¦å¤šäººå¯©æ ¸

3. **å¯¦æ™‚ç›£æ§**:
   - ç•°å¸¸äº¤æ˜“è‡ªå‹•è­¦å ±
   - å¤§é¡å……å€¼/ææ¬¾äººå·¥å¯©æ ¸

### 10.2 åæ´—éŒ¢ (AML)

```typescript
// åæ´—éŒ¢æª¢æŸ¥
async function checkAML(userId: string, amount: number) {
  // 1. æª¢æŸ¥å–®æ—¥å……å€¼é™é¡
  const todayDeposits = await getDailyDeposits(userId);
  if (todayDeposits + amount > DAILY_LIMIT) {
    throw new Error('Daily deposit limit exceeded');
  }
  
  // 2. æª¢æŸ¥ç”¨æˆ¶èº«ä»½é©—è­‰
  const user = await getUser(userId);
  if (!user.kyc_verified && amount > KYC_THRESHOLD) {
    throw new Error('KYC verification required for large deposits');
  }
  
  // 3. æª¢æŸ¥é»‘åå–®
  const isBlacklisted = await checkBlacklist(userId);
  if (isBlacklisted) {
    throw new Error('User is blacklisted');
  }
  
  return true;
}
```

### 10.3 æ•¸æ“šåŠ å¯†

- **å‚³è¼¸åŠ å¯†**: TLS 1.3
- **å„²å­˜åŠ å¯†**: AES-256
- **æ•æ„Ÿæ•¸æ“š**: éŠ€è¡Œå¸³è™Ÿé®ç½©é¡¯ç¤º

```typescript
// éŠ€è¡Œå¸³è™Ÿé®ç½©
function maskAccountNumber(accountNumber: string): string {
  if (accountNumber.length <= 4) return accountNumber;
  const last4 = accountNumber.slice(-4);
  const masked = '*'.repeat(accountNumber.length - 4);
  return masked + last4;
}

// Example: "1234567890" â†’ "******7890"
```

---

## 11. API ç«¯é»

### 11.1 éŒ¢åŒ… API

#### GET `/make-server-215f78a5/wallet/:userId`

ç²å–ç”¨æˆ¶éŒ¢åŒ…ä¿¡æ¯

**è«‹æ±‚**:
```bash
curl -X GET \
  https://PROJECT_ID.supabase.co/functions/v1/make-server-215f78a5/wallet/USER_ID \
  -H 'Authorization: Bearer ACCESS_TOKEN'
```

**éŸ¿æ‡‰**:
```json
{
  "wallet": {
    "user_id": "uuid",
    "available_balance": 15250,
    "pending_withdrawal": 0,
    "total_earned": 15250,
    "total_spent": 0,
    "created_at": "2025-12-31T00:00:00Z",
    "updated_at": "2025-12-31T12:00:00Z"
  }
}
```

### 11.2 äº¤æ˜“ API

#### GET `/make-server-215f78a5/transactions`

ç²å–äº¤æ˜“è¨˜éŒ„

**è«‹æ±‚**:
```bash
curl -X GET \
  https://PROJECT_ID.supabase.co/functions/v1/make-server-215f78a5/transactions \
  -H 'Authorization: Bearer ACCESS_TOKEN'
```

**éŸ¿æ‡‰**:
```json
{
  "transactions": [
    {
      "id": "txn_1735689600000",
      "user_id": "uuid",
      "type": "deposit",
      "amount": 15250,
      "status": "completed",
      "description": "PayPal Deposit - $500 USD",
      "created_at": "2025-12-31T00:00:00Z",
      "payment_method": "paypal"
    }
  ]
}
```

### 11.3 ææ¬¾ API

#### POST `/make-server-215f78a5/withdrawals`

æäº¤ææ¬¾ç”³è«‹

**è«‹æ±‚**:
```bash
curl -X POST \
  https://PROJECT_ID.supabase.co/functions/v1/make-server-215f78a5/withdrawals \
  -H 'Authorization: Bearer ACCESS_TOKEN' \
  -H 'Content-Type: application/json' \
  -d '{
    "amount": 1500,
    "method_id": "bank_account_123",
    "currency": "USD"
  }'
```

**éŸ¿æ‡‰**:
```json
{
  "success": true,
  "withdrawal": {
    "id": "withdrawal_1735689780000",
    "user_id": "uuid",
    "amount": 1500,
    "fee": 30,
    "net_amount": 1470,
    "status": "pending",
    "created_at": "2025-12-31T12:00:00Z"
  },
  "message": "Withdrawal request submitted successfully"
}
```

### 11.4 å……å€¼ API (PayPal)

#### POST `/make-server-215f78a5/paypal/create-order`

å‰µå»º PayPal å……å€¼è¨‚å–®

**è«‹æ±‚**:
```bash
curl -X POST \
  https://PROJECT_ID.supabase.co/functions/v1/make-server-215f78a5/paypal/create-order \
  -H 'Authorization: Bearer ACCESS_TOKEN' \
  -H 'Content-Type: application/json' \
  -d '{
    "amount": "500.00",
    "currency": "USD",
    "description": "Wallet Deposit"
  }'
```

**éŸ¿æ‡‰**:
```json
{
  "orderId": "PAYPAL_ORDER_ID",
  "approvalUrl": "https://www.paypal.com/checkoutnow?token=..."
}
```

### 11.5 æ‰˜ç®¡ API

#### POST `/make-server-215f78a5/escrow/:id/release`

æ’¥æ¬¾çµ¦æ¥æ¡ˆè€…

**è«‹æ±‚**:
```bash
curl -X POST \
  https://PROJECT_ID.supabase.co/functions/v1/make-server-215f78a5/escrow/ESCROW_ID/release \
  -H 'Authorization: Bearer ACCESS_TOKEN'
```

**éŸ¿æ‡‰**:
```json
{
  "success": true,
  "message": "Payment released to freelancer"
}
```

---

## 12. å¸¸è¦‹å•é¡Œ

### Q1: ç‚ºä»€éº¼æˆ‘çš„å……å€¼é‡‘é¡å’Œé¤˜é¡é¡¯ç¤ºä¸åŒï¼Ÿ

**ç­”**: é€™æ˜¯å› ç‚ºåŒ¯ç‡è½‰æ›çš„é—œä¿‚ã€‚

- **å„²å­˜**: æ‰€æœ‰é‡‘é¡çµ±ä¸€ä»¥ **TWD** å„²å­˜åœ¨è³‡æ–™åº«
- **é¡¯ç¤º**: æ ¹æ“šæ‚¨çš„èªè¨€è¨­å®šé¡¯ç¤ºä¸åŒè²¨å¹£
  - è‹±æ–‡ç‰ˆ: USD (ç¾é‡‘)
  - ç¹ä¸­ç‰ˆ: TWD (æ–°å°å¹£) - ç›´æ¥é¡¯ç¤ºï¼Œç„¡éœ€è½‰æ›
  - ç°¡ä¸­ç‰ˆ: CNY (äººæ°‘å¹£)

**ç¯„ä¾‹**:
```
æ‚¨å……å€¼ $100 USD
â†’ å„²å­˜ç‚º NT$3,050 (100 Ã— 30.5)
â†’ è‹±æ–‡ç‰ˆé¡¯ç¤º: $100
â†’ ç¹ä¸­ç‰ˆé¡¯ç¤º: NT$3,050
â†’ ç°¡ä¸­ç‰ˆé¡¯ç¤º: Â¥709 (3050 Ã· 4.3)
```

### Q2: å……å€¼å¾ŒéŒ¢åŒ…é¤˜é¡æ²’æœ‰æ›´æ–°æ€éº¼è¾¦ï¼Ÿ

**è§£æ±ºæ–¹æ¡ˆ**:

1. **ç­‰å¾… 1-2 åˆ†é˜**: PayPal/ECPay å›èª¿å¯èƒ½æœ‰å»¶é²
2. **åˆ·æ–°é é¢**: æŒ‰ F5 æˆ–é‡æ–°è¼‰å…¥é é¢
3. **æª¢æŸ¥äº¤æ˜“è¨˜éŒ„**: æŸ¥çœ‹æ˜¯å¦æœ‰æˆåŠŸçš„ deposit äº¤æ˜“
4. **è¯ç¹«å®¢æœ**: å¦‚æœè¶…é 5 åˆ†é˜ä»æœªåˆ°è³¬

### Q3: æœ€ä½å……å€¼/ææ¬¾é‡‘é¡æ˜¯å¤šå°‘ï¼Ÿ

| æ“ä½œ | æœ€ä½é‡‘é¡ | èªªæ˜ |
|-----|---------|-----|
| **å……å€¼** | NT$300 / $10 USD | ä½æ–¼æ­¤é‡‘é¡ç„¡æ³•å……å€¼ |
| **ææ¬¾** | NT$1,500 / $50 USD | ä½æ–¼æ­¤é‡‘é¡ç„¡æ³•ææ¬¾ |

### Q4: ææ¬¾éœ€è¦å¤šä¹…æ‰èƒ½åˆ°å¸³ï¼Ÿ

**è™•ç†æ™‚ç¨‹**:
1. **å¯©æ ¸éšæ®µ**: 1-2 å·¥ä½œæ—¥ (ç®¡ç†å“¡å¯©æ ¸)
2. **è½‰å¸³éšæ®µ**: 2-3 å·¥ä½œæ—¥ (éŠ€è¡Œè™•ç†)
3. **ç¸½è¨ˆ**: **3-5 å·¥ä½œæ—¥**

**åŠ é€Ÿæ–¹å¼**:
- å‡ç´šç‚º **Enterprise æœƒå“¡**: å„ªå…ˆå¯©æ ¸ï¼Œ1-2 å·¥ä½œæ—¥åˆ°å¸³

### Q5: æ‰‹çºŒè²»æ€éº¼è¨ˆç®—ï¼Ÿ

**å……å€¼**: å…æ‰‹çºŒè²» âœ…

**ææ¬¾**:
```
ææ¬¾é‡‘é¡: $1,000
æ‰‹çºŒè²» (2%): $20
å¯¦éš›åˆ°å¸³: $980
```

**è¨—ç®¡ (å¹³å°æ‰‹çºŒè²»)**:
```
é …ç›®é‡‘é¡: $1,000
å¹³å°æ‰‹çºŒè²» (5-10%): $50-$100
æ¥æ¡ˆè€…å¯¦æ”¶: $900-$950
```

### Q6: å¦‚ä½•æ·»åŠ ææ¬¾éŠ€è¡Œå¸³æˆ¶ï¼Ÿ

**æ­¥é©Ÿ**:
1. é€²å…¥ **Dashboard â†’ éŠ€è¡Œå¸³æˆ¶**
2. é»æ“Š **ã€Œæ·»åŠ éŠ€è¡Œå¸³æˆ¶ã€**
3. å¡«å¯«è³‡æ–™:
   - éŠ€è¡Œåç¨±
   - éŠ€è¡Œä»£ç¢¼ (å°ç£: 3ç¢¼, åœ‹éš›: SWIFT Code)
   - å¸³æˆ¶è™Ÿç¢¼
   - æˆ¶å (éœ€èˆ‡å¯¦åèªè­‰ä¸€è‡´)
4. é»æ“Š **ã€Œå„²å­˜ã€**

**åœ‹éš›ç”¨æˆ¶**:
- ä¹Ÿå¯ä»¥æ·»åŠ  **PayPal å¸³æˆ¶** ä½œç‚ºææ¬¾æ–¹å¼
- PayPal ææ¬¾æ›´å¿«é€Ÿ (1-2 å·¥ä½œæ—¥)

### Q7: è¨—ç®¡çš„éŒ¢å¯ä»¥é€€æ¬¾å—ï¼Ÿ

**å¯ä»¥é€€æ¬¾çš„æƒ…æ³**:
- âœ… æ¥æ¡ˆè€…æœªåœ¨æœŸé™å…§å®Œæˆå·¥ä½œ
- âœ… é›™æ–¹å”å•†åŒæ„å–æ¶ˆé …ç›®
- âœ… æ¥æ¡ˆè€…ä¸»å‹•æ”¾æ£„é …ç›®

**é€€æ¬¾æµç¨‹**:
1. æ¡ˆä¸»æˆ–æ¥æ¡ˆè€…ç™¼èµ·å–æ¶ˆè«‹æ±‚
2. ç®¡ç†å“¡å¯©æ ¸
3. è¨—ç®¡é‡‘é¡å…¨é¡é€€å›æ¡ˆä¸»éŒ¢åŒ…
4. 1-2 å·¥ä½œæ—¥å…§å®Œæˆ

**ä¸å¯é€€æ¬¾çš„æƒ…æ³**:
- âŒ æ¥æ¡ˆè€…å·²å®Œæˆå·¥ä½œä¸¦æäº¤äº¤ä»˜ç‰©
- âŒ æ¡ˆä¸»ç„¡ç†ç”±æ‹’çµ•é©—æ”¶ (çˆ­è­°éœ€ä»²è£)

### Q8: ç‰¹æ®Šç”¨æˆ¶ (davidlai117@yahoo.com.tw) æœ‰ä»€éº¼ç‰¹æ¬Šï¼Ÿ

**ç‰¹æ®Šæ¬Šé™**:
- âœ… å…å¹³å°æ‰‹çºŒè²» (0%)
- âœ… å…ææ¬¾æ‰‹çºŒè²» (0%)
- âœ… å„ªå…ˆå®¢æœæ”¯æ´
- âœ… ç„¡é™åˆ¶å……å€¼/ææ¬¾é¡åº¦
- âœ… å³æ™‚ææ¬¾ (ç„¡éœ€å¯©æ ¸)

**è§¸ç™¼æ©Ÿåˆ¶**:
ç³»çµ±æœƒè‡ªå‹•æª¢æ¸¬ç™»å…¥ç”¨æˆ¶ emailï¼Œå¦‚æœæ˜¯ç‰¹æ®Šç”¨æˆ¶ï¼Œæœƒè‡ªå‹•è§¸ç™¼ `refreshSubscription` äº‹ä»¶ï¼Œåˆ·æ–°æ‰€æœ‰ UI çµ„ä»¶ä»¥é¡¯ç¤ºç‰¹æ®Šæ¬Šé™ã€‚

### Q9: å¦‚ä½•æŸ¥çœ‹æˆ‘çš„äº¤æ˜“è¨˜éŒ„ï¼Ÿ

**æ­¥é©Ÿ**:
1. é€²å…¥ **Dashboard â†’ äº¤æ˜“è¨˜éŒ„** æ¨™ç±¤
2. æŸ¥çœ‹æ‰€æœ‰å……å€¼ã€ææ¬¾ã€è¨—ç®¡ã€æ’¥æ¬¾è¨˜éŒ„
3. å¯ä¾ç…§:
   - æ™‚é–“ç¯„åœç¯©é¸
   - äº¤æ˜“é¡å‹ç¯©é¸
   - ç‹€æ…‹ç¯©é¸
4. é»æ“Šäº¤æ˜“å¯æŸ¥çœ‹è©³ç´°è³‡è¨Š

**äº¤æ˜“é¡å‹èªªæ˜**:
- **deposit**: å……å€¼
- **escrow**: è¨—ç®¡ (æ‰£æ¬¾)
- **release**: æ’¥æ¬¾ (æ”¶æ¬¾)
- **withdrawal**: ææ¬¾
- **refund**: é€€æ¬¾

### Q10: éŒ¢åŒ…é¤˜é¡å®‰å…¨å—ï¼Ÿ

**å®‰å…¨æªæ–½**:
1. âœ… **è³‡é‡‘éš”é›¢**: å¹³å°è³‡é‡‘èˆ‡ç”¨æˆ¶è³‡é‡‘åˆ†é–‹ç®¡ç†
2. âœ… **åŠ å¯†å„²å­˜**: æ‰€æœ‰æ•¸æ“šä½¿ç”¨ AES-256 åŠ å¯†
3. âœ… **å¯¦æ™‚ç›£æ§**: ç•°å¸¸äº¤æ˜“è‡ªå‹•è­¦å ±
4. âœ… **å¯©è¨ˆæ—¥èªŒ**: æ‰€æœ‰æ“ä½œå¯è¿½æº¯
5. âœ… **å‚™ä»½æ©Ÿåˆ¶**: æ¯æ—¥è‡ªå‹•å‚™ä»½
6. âœ… **ä¿éšªè¦†è“‹**: å¹³å°æŠ•ä¿è³‡é‡‘å®‰å…¨éšª

**å»ºè­°**:
- å®šæœŸææ¬¾ï¼Œä¸è¦åœ¨éŒ¢åŒ…ä¸­å­˜æ”¾å¤§é¡è³‡é‡‘
- å•Ÿç”¨ **å…©æ­¥é©Ÿé©—è­‰ (2FA)**
- å®šæœŸæª¢æŸ¥äº¤æ˜“è¨˜éŒ„

---

## ğŸ“ æŠ€è¡“æ”¯æ´

å¦‚æœ‰ä»»ä½•å•é¡Œï¼Œè«‹è¯ç¹«ï¼š

- **Email**: support@casewhr.com
- **å®¢æœé›»è©±**: +886-2-1234-5678
- **ç·šä¸Šå®¢æœ**: https://casewhr.com/contact
- **æŠ€è¡“æ–‡æª”**: https://docs.casewhr.com

---

**æ–‡æª”ç‰ˆæœ¬**: v1.0.0  
**æœ€å¾Œæ›´æ–°**: 2025å¹´12æœˆ31æ—¥  
**ç¶­è­·è€…**: CaseWhr æŠ€è¡“åœ˜éšŠ
